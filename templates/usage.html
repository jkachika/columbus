{% extends "nlbase.html" %}
{% load staticfiles %}
{% block title %}
    <title>Usage</title>
{% endblock %}
{% block navitems %}
    <li><a href="/?page=overview">Getting Started</a></li>
    <li class="active"><a href="/?page=usage">Usage</a></li>
    <li><a href="/?page=publications">Publications</a></li>
    <li><a href="/?page=releases">Releases</a></li>
    <li><a href="/?page=people">People</a></li>
{% endblock %}
{% block nlbody %}
    <div class="docs-header" id="content" tabindex="-1">
        <div class="container">
            <h1>Application Usage</h1>
            <p>Elements of the engine in practice, enabling visualizations, running the workflows and tracking the
                analysis.</p>
        </div>
    </div>
    <div id="usage-div" class="container bs-docs-container">
        <div class="row">
            <div class="col-md-9" role="main">
                <div class="bs-docs-section"><h1 class="page-header" id="workspace">
                    <a href="#workspace"></a>Workspace
                </h1>
                    <p class="lead">Workspace is the place to define all your elements viz. Components, Workflows,
                        Combiners, and Constraints. As of this version, you can create Polygons and Schedules too, but
                        they are reserved for future purposes and are not used by the application.</p>
                    <h2 id="w-components"><a href="#w-components"></a>Components</h2>
                    <p>Components are of two types - Root Components and Non-Root Components. A root component does not
                        have to specify it's parents but the non-root components do. A component can have another
                        component or a combiner as it's parent.</p>
                    <ol>
                        <li id="wc-root"><strong>Root Component</strong>
                            <p>Use the instructions in the below image to create a Root component.
                            </p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/root-component-create.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                            <p>A successfully created root component will look something like this:</p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/root-component-success.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                        </li>
                        <li id="wc-non-root"><strong>Non-root Component</strong>
                            <p>
                                For a non-root component, you have to specify the parents. You can choose any number of
                                parents from the given drop-down and you can choose both Components and Combiners as the
                                parents.
                            </p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/nonroot-component-create.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                            <blockquote>
                                <p>Note that you can neither change a root component to non-root component or the
                                    parents of a non-root component after it's creation.</p>
                            </blockquote>
                            <p>A successfully created non-root component will look something like this:</p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/nonroot-component-success.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                        </li>
                        <li id="wc-visualization"><strong>Visualizing Components</strong>
                            <p>If you want to visualize the output of a component on a Google map, you can do so by
                                enabling the visualize option on the component screen. Enabling visualization on a
                                component creates a Google Fusion table and the space is limited to 1GB at this writing.
                                So, please enable visualization only if you really need it.</p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/component-visualize-create.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                            <blockquote>
                                <p>When you enable visualization on a component, make sure you select at least one
                                    interested party for the visualization otherwise you will not be able to access the
                                    visualization outside of Columbus.</p>
                            </blockquote>
                            <blockquote>
                                <p>Only users having gmail e-mail address will
                                    appear in the Interested Parties drop-down. If chosen as an interested party,
                                    users can see the created Fusion table as part of their google drive.</p>
                            </blockquote>
                            <p>You should see something like this when you successfully create a component with
                                visualization enabled. </p>
                            <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/component-visualize-success.png"
                                 width="100%" style="margin-bottom: 40px;"/>
                        </li>
                    </ol>
                    <h2 id="w-workflows">Workflows</h2>
                    <p>Workflows help you to connect all the components together and run them. You should select only a
                        single component that marks as the end of your workflow and you will see what all components and
                        combiners would be involved with that flow to its right as shown below. Optionally,
                        you can share workflows with other users in the system.</p>
                    <blockquote>
                        <p>
                            If you share a workflow, other users will be able to use components and combiners in your
                            workflow as parents for their components. Un-sharing a workflow later cannot fully revoke
                            the access given to other users if they have dependencies on your elements.
                        </p>
                    </blockquote>
                    <p>This is how the workflow screen looks like.</p>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-create.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <h2 id="w-combiners">Combiners</h2>
                    <p>Combiners help you combine the output of multiple runs of a single workflow. You can optionally
                        specify <i>start time</i> or <i>end time</i> or both to filter the workflow runs with in
                        that time range.</p>
                    <blockquote>
                        <p>
                            Start time and End time indicate the creation time of a workflow instance as listed on
                            the Dashboard.
                        </p>
                    </blockquote>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/combiner-create.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <h2 id="w-constraints">Other Elements</h2>
                    <p>Polygons help you constraint the data selection by arbitrary space. You can create your own
                        polygons or import them from Google fusion tables.
                    <p>Constraints help you apply a filter on the raw data given as input to your root components.</p>
                    <p>Schedules are reserved for future use.</p>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/constraint-create.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/constraint-create-2.png"
                         width="100%" style="margin-bottom: 40px;"/>

                    <h2 id="w-dummies">Pseudo Targets</h2>
                    <p>
                        Components and Combiners that do not define any processing instructions are referred to as
                        pseudo targets. They're helpful in building complex workflows and to keep the data flowing
                        in a Workflow.
                    </p>
                    <blockquote>
                        <p>You should make sure that the input and output types are matching when defining
                            a Component or Combiner that acts as a Pseudo Target</p>
                    </blockquote>
                    <blockquote>
                        <p>When defining Components having more than one parent as Pseudo targets, the output
                            type must be a Blob</p>
                    </blockquote>
                </div>
                <div class="bs-docs-section">
                    <h1 class="page-header" id="running-workflows">Running Workflows</h1>
                    <p class="lead">
                        Workflows can be run from the home page by making appropriate data source choices for each
                        root component of the selected workflow. Available data source choices include Google Bigquery,
                        Google Drive, Galileo Storage System, and Workflow Combiner. There are two run-types for
                        running a workflow &boxh; <strong>for</strong> and <strong>for-each</strong>, depending on the
                        data source choice.
                    <ul>
                        <li><strong>Google Bigquery</strong> &boxh; Allows selecting a table and filtering the
                            observations by specifying the filtering criteria on the columns of the selected table.
                            Assume
                            a table named
                            <a class="ext"
                               href="http://www.nyc.gov/html/tlc/html/about/trip_record_data.shtml">
                                <code>nyc_yellow_taxi_trips</code>
                            </a> having
                            <a class="ext"
                               href="http://www.nyc.gov/html/tlc/downloads/pdf/data_dictionary_trip_records_yellow.pdf">
                                several columns
                            </a>
                            including <code>trip_distance</code> and <code>rate_code_id</code> among others.
                        </li>
                        </li>
                        <ul>
                            <li>for &boxh; creates a single workflow instance and feeds the observations obtained
                                by the specified selection criteria to the chosen root component. For instance, if the
                                selection criteria on <code>nyc_yellow_taxi_trips</code> table says
                                <code>trip_distance > 25</code> , then all the trips having trip distance more than
                                25 miles will be given as input to the root component of a single workflow instance.
                            </li>
                            <li>for-each &boxh; creates one workflow instance per unique value of the chosen column.
                                If the selection criteria on the <code>nyc_yellow_taxi_trips</code> table says
                                <code>rate_code_id</code>, then 6 workflow instances will be created and all
                                observations having same <code>rate_code_id</code> will be given as input to the
                                same workflow instance.
                            </li>
                        </ul>
                        <br>
                        <li><strong>Google Drive</strong> &boxh; Allows users to choose CSV files and Google fusion
                            tables from their Google Drive.
                        </li>
                        <ul>
                            <li>for &boxh; creates a single workflow instance for any chosen CSV file or Google
                                fusion table
                            </li>
                            <li>for-each &boxh; creates one workflow instance per CSV file or Google fusion table
                                in a folder
                            </li>
                        </ul>
                        <br>
                        <li><strong>Galileo Storage System</strong> &boxh; Allows users to choose a table stored in
                            the <a class="ext" href="https://github.com/jkachika/galileo-spacetime">
                                Galileo Spacetime</a> storage system. Storing data in Galileo allows users visualize
                            the presence of data globally and Columbus makes it possible to query the data constrained
                            by arbitrary space or time. Galileo groups the query results based on space and time. If
                            query involves only space, then results are grouped on time; if query involves only time,
                            then results are grouped on space; if query involves both space and time, then results
                            obtained do not need any grouping; and lastly if the query involves neither space nor time,
                            then the results are grouped on both space and time.
                        </li>
                        <ul>
                            <li>for &boxh; creates a single workflow instance for all the data retrieved from Galileo
                            </li>
                            <li>for-each &boxh; creates one workflow instance per group of results obtained from
                                Galileo
                            </li>
                        </ul>
                        <br>
                        <li><strong>Workflow Combiner</strong> &boxh;
                            The choice of data source if a Workflow contains only a Combiner
                            as the root.
                        </li>
                    </ul>
                    </p>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-run-1.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-run-2.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-run-3.png"
                         width="100%" style="margin-bottom: 40px;"/>
                </div>
                <div class="bs-docs-section">
                    <h1 class="page-header" id="history">History</h1>
                    <p class="lead">This is the place where you find all your workflows. Currently this page shows only
                        your past 50 runs. The image below explains the sections on this screen.
                    </p>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-history.png"
                         width="100%" style="margin-bottom: 40px;"/>
                    <img src="https://raw.githubusercontent.com/jkachika/columbus/master/docs/screenshots/workflow-history-2.png"
                         width="100%" style="margin-bottom: 40px;"/>
                </div>
            </div>
            <div class="col-md-3" role="complementary">
                <nav class="bs-docs-sidebar hidden-print hidden-sm hidden-xs affix-top">
                    <ul class="nav bs-docs-sidenav">
                        <li class=""><a href="#workspace">Workspace</a>
                            <ul class="nav">
                                <li><a href="#w-components">Components</a>
                                    <ul class="nav">
                                        <li><a href="#wc-root">Root Components</a></li>
                                        <li><a href="#wc-non-root">Non-Root Components</a></li>
                                        <li><a href="#wc-visualization">Visualizing Components</a></li>
                                    </ul>
                                </li>
                                <li><a href="#w-workflows">Workflows</a></li>
                                <li><a href="#w-combiners">Combiners</a></li>
                                <li><a href="#w-constraints">Other Elements</a></li>
                                <li><a href="#w-dummies">Pseudo Targets</a></li>
                            </ul>
                        </li>
                        <li><a href="#running-workflows">Running Workflows</a></li>
                        <li><a href="#history">History</a></li>
                    </ul>
                    <a href="#top" class="back-to-top"> Back to top </a>
                </nav>
            </div>
        </div>
    </div>

{% endblock %}
{% block nlbodyscripts %}
    <script>
        $(document).ready(function () {
            var $navigation = $('#navigation');
            var $header = $('#content');
            var $footer = $('footer');
            var height = $navigation.css('height') + ' - ' + $header.css('height') + ' - ' + $header.css('marginTop') + ' - '
                    + $header.css('marginBottom') + ' - ' + $footer.css('height') + ' - ' + $footer.css('marginTop') + ' - ' +
                    $footer.css('marginBottom');
            $('#usage-div').css('min-height', 'calc(100% - ' + height + ')');
        });
    </script>
{% endblock %}